<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>jQuery UI 排序（Sortable） - 门户组件（Portlets）</title>
	<link rel="stylesheet" href="../../themes/base/all.css">
	<script src="../../external/jquery/jquery.js"></script>
	<script src="../../ui/core.js"></script>
	<script src="../../ui/widget.js"></script>
	<script src="../../ui/mouse.js"></script>
	<script src="../../ui/sortable.js"></script>
    <script src="../../ui/draggable.js"></script>
    <script src="../../ui/droppable.js"></script>
	<link rel="stylesheet" href="../demos.css">
	<style>
	body {
		min-width: 520px;
	}
	.column {
		width: 170px;
		float: left;
		padding-bottom: 100px;
	}
	.portlet {
		margin: 0 1em 1em 0;
		padding: 0.3em;
	}
	.portlet-header {
		padding: 0.2em 0.3em;
		margin-bottom: 0.5em;
		position: relative;
	}
	.portlet-toggle {
		position: absolute;
		top: 50%;
		right: 0;
		margin-top: -8px;
	}
	.portlet-content {
		padding: 0.4em;
	}
	.portlet-placeholder {
		border: 1px dotted black;
		margin: 0 1em 1em 0;
		height: 50px;
        background:#80ff80;
	}
    .box .box-item{float: left; width:50%;}
    .box .portlet{ float: left; width: 170px;}
    .box .portlet-placeholder  {float: left; width: 170px;}
	</style>
	<script>
	$(function() {
        //放置到 全部类别 区域
        $(".column .portlet").draggable({
            connectToSortable: ".box .bd-all",
            opacity: 0.8,
            revert: "invalid", // 当未被放置时，条目会还原回它的初始位置
            helper: "clone",
            handle: ".portlet-header",
            cancel: ".ui-icon",
            start: function(event, ui) {

            },
            drag: function(event, ui) {
                //console.log('drag', event, ui);
                ui.helper.width(160).height('auto');
            },
            stop: function(event, ui) {

            }
        });

        $( ".box .bd-all" ).droppable({
            accept: ".column .portlet", //接受对象
            activeClass: "ui-state-default",   // 有放置对象时提示
            drop: function( event, ui ) {

            }
        });

        $(".box .bd-all").sortable({
            placeholder: "portlet-placeholder",
            activeClass: "portlet-placeholder",
            hoverClass: "ui-state-hover",
            opacity: .85,
            connectWith: ".portlet",
            start: function(event, ui) {
                //console.log('start', event, ui);
            },
            stop: function(event, ui) {
                //console.log('stop', event, ui);
            }
        }).disableSelection();

        //放置到  新闻类别 区域
        $(".column .portlet-type-news").draggable({
            connectToSortable: ".box .bd-type-news, .box .bd-all",
            opacity: 0.8,
            revert: "invalid", // 当未被放置时，条目会还原回它的初始位置
            helper: "clone",
            handle: ".portlet-header",
            cancel: ".ui-icon",
            start: function(event, ui) {

            },
            drag: function(event, ui) {
                //console.log('drag', event, ui);
                ui.helper.width(160).height('auto');
            },
            stop: function(event, ui) {

            }
        });

        $( ".box .bd-type-news" ).droppable({
            accept: ".column .portlet-type-news", //接受对象
            activeClass: "ui-state-default",   // 有放置对象时提示
            drop: function( event, ui ) {

            }
        });

        $(".box .bd-type-news").sortable({
            placeholder: "portlet-placeholder",
            activeClass: "portlet-placeholder",
            hoverClass: "ui-state-hover",
            opacity: .85,
            connectWith: ".portlet-type-news",
            start: function(event, ui) {
                //console.log('start', event, ui);
            },
            stop: function(event, ui) {
                //console.log('stop', event, ui);
            }
        }).disableSelection();

        $( ".portlet" )
                .addClass( "ui-widget ui-widget-content ui-helper-clearfix ui-corner-all" )
                .find( ".portlet-header" )
                .addClass( "ui-widget-header ui-corner-all" )
                .prepend( "<span class='ui-icon ui-icon-minusthick portlet-toggle'></span>");

        $('body').delegate('.portlet-toggle', 'click', function() {
            var icon = $( this );
            icon.toggleClass( "ui-icon-minusthick ui-icon-plusthick" );
            icon.closest( ".portlet" ).find( ".portlet-content" ).toggle();
        });








	});
	</script>
</head>
<body>

<h2>备选分类</h2>
<div class="column">

	<div class="portlet">
		<div class="portlet-header">订阅</div>
		<div class="portlet-content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit</div>
	</div>

	<div class="portlet portlet-type-news">
		<div class="portlet-header">新闻</div>
		<div class="portlet-content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit</div>
	</div>

</div>

<div class="column">

	<div class="portlet">
		<div class="portlet-header">购物</div>
		<div class="portlet-content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit</div>
	</div>

</div>

<div class="column">

	<div class="portlet">
		<div class="portlet-header">链接</div>
		<div class="portlet-content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit</div>
	</div>

	<div class="portlet">
		<div class="portlet-header">图像</div>
		<div class="portlet-content">Lorem ipsum dolor sit amet, consectetuer adipiscing elit</div>
	</div>

</div>

<h2 style="clear:both;">放置区</h2>
<div class="box">
    <div class="box-item">
        <div class="hd">全部类别：</div>
        <div class="bd-all" style="height: 300px;"></div>
    </div>
    <div class="box-item">
        <div class="hd">新闻类别：</div>
        <div class="bd-type-news" style="height: 300px;"></div>
    </div>

</div>

<div class="demo-description">
<p>
    启用门户组件（样式化的 div）作为 sortable，并使用 connectWith 选项来允许在列之间进行排序。
</p>
</div>
</body>
</html>

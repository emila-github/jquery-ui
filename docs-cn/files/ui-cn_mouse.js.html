<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>ui-cn\mouse.js - jquery-ui</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="jquery-ui"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: 1.11.2-pre</em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/$.extend.html">$.extend</a></li>
            
                <li><a href="../classes/$.ui.html">$.ui</a></li>
            
                <li><a href="../classes/$.ui.plugin.html">$.ui.plugin</a></li>
            
                <li><a href="../classes/ui.draggable.html">ui.draggable</a></li>
            
                <li><a href="../classes/ui.mouse.html">ui.mouse</a></li>
            
                <li><a href="../classes/ui.widget.html">ui.widget</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/bridge.html">bridge</a></li>
            
                <li><a href="../modules/draggable.html">draggable</a></li>
            
                <li><a href="../modules/mouse.html">mouse</a></li>
            
                <li><a href="../modules/ui.html">ui</a></li>
            
                <li><a href="../modules/widget.html">widget</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: ui-cn\mouse.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/*!
 * jQuery UI Mouse @VERSION
 * http://jqueryui.com
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 */
(function( factory ) {
	if ( typeof define === &quot;function&quot; &amp;&amp; define.amd ) {

		// AMD. Register as an anonymous module.
		define([
			&quot;jquery&quot;,
			&quot;./widget&quot;
		], factory );
	} else {

		// Browser globals
		factory( jQuery );
	}
}(function( $ ) {

var mouseHandled = false;
$( document ).mouseup( function() {
	mouseHandled = false;
});

/**
 * $.ui.mouse 鼠标交互&lt;br/&gt;
 * 与 jQuery.Widget 相似，鼠标交互的目的不是直接使用。
 * 这是一个纯粹给其他小部件继承用的基础层。该页面有添加到 jQuery.Widget 的文档，但是它包含了不能被覆盖的内部方法。
 * 公共的 API 是 _mouseStart()、_mouseDrag()、_mouseStop() 和 _mouseCapture()。
 * 
 * @class mouse
 * @module mouse
 * @requires widget
 * @constructor
 * @namespace ui
 */

return $.widget(&quot;ui.mouse&quot;, {
	version: &quot;@VERSION&quot;,
	/**
	 * 默认的鼠标交互 options
	 * @property options
	 * @type {Object}
	 * @final
	 * @example
	 *	//初始化带有指定 cancel 选项的 mouse：
	 *	$( &quot;.selector&quot; ).mouse({ cancel: &quot;.title&quot; });
	 *	
	 *	//在初始化后，获取或设置 cancel 选项：
	 *	// getter
	 *	var cancel = $( &quot;.selector&quot; ).mouse( &quot;option&quot;, &quot;cancel&quot; );
	 *	// setter
	 *	$( &quot;.selector&quot; ).mouse( &quot;option&quot;, &quot;cancel&quot;, &quot;.title&quot; );
	 * 
	 */
	options: {
		cancel: &quot;input,textarea,button,select,option&quot;,  //防止从指定的元素上开始交互。
		distance: 1, //鼠标按下后交互开始前鼠标必须移动的距离，以像素计。该选项可用于防止点击在一个元素上时不必要的交互。
		delay: 0  //鼠标按下后直至交互开始的事件，以毫秒计。该选项可用于防止点击在一个元素上时不必要的交互。
	},
    /**
     * 初始化交互事件处理程序。这必须调用来自扩展的小部件的 _create() 方法。
     * @method  _mouseInit
     * @private
     */
	_mouseInit: function() {
		var that = this;

		this.element
			.bind(&quot;mousedown.&quot; + this.widgetName, function(event) {
				return that._mouseDown(event);
			})
			.bind(&quot;click.&quot; + this.widgetName, function(event) {
				if (true === $.data(event.target, that.widgetName + &quot;.preventClickEvent&quot;)) {
					$.removeData(event.target, that.widgetName + &quot;.preventClickEvent&quot;);
					event.stopImmediatePropagation();
					return false;
				}
			});

		this.started = false;
	},

	// TODO: make sure destroying one instance of mouse doesn&#x27;t mess with
	// other instances of mouse
    /**
     * 销毁交互事件处理程序。这必须调用来自扩展的小部件的 _destroy() 方法。
     * @method  _mouseDestroy
     * @private
     */
	_mouseDestroy: function() {
		this.element.unbind(&quot;.&quot; + this.widgetName);
		if ( this._mouseMoveDelegate ) {
			this.document
				.unbind(&quot;mousemove.&quot; + this.widgetName, this._mouseMoveDelegate)
				.unbind(&quot;mouseup.&quot; + this.widgetName, this._mouseUpDelegate);
		}
	},
    /**
     * 处理交互的开始。确认与主要的鼠标按钮关联的事件，确保 delay 与 distance 在交互启动之前得到满足。
     * 当交互已经准备开始，为要处理的扩展小部件调用 _mouseStart 方法。
     * @method  _mouseDown
     * @param event
     * @returns {boolean}
     * @private
     */
	_mouseDown: function(event) {
		// don&#x27;t let more than one widget handle mouseStart
		if ( mouseHandled ) {
			return;
		}

		this._mouseMoved = false;

		// we may have missed mouseup (out of window)
		(this._mouseStarted &amp;&amp; this._mouseUp(event));

		this._mouseDownEvent = event;

		var that = this,
			btnIsLeft = (event.which === 1),
			// event.target.nodeName works around a bug in IE 8 with
			// disabled inputs (#7620)
			elIsCancel = (typeof this.options.cancel === &quot;string&quot; &amp;&amp; event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false);
		if (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {
			return true;
		}

		this.mouseDelayMet = !this.options.delay;
		if (!this.mouseDelayMet) {
			this._mouseDelayTimer = setTimeout(function() {
				that.mouseDelayMet = true;
			}, this.options.delay);
		}

		if (this._mouseDistanceMet(event) &amp;&amp; this._mouseDelayMet(event)) {
			this._mouseStarted = (this._mouseStart(event) !== false);
			if (!this._mouseStarted) {
				event.preventDefault();
				return true;
			}
		}

		// Click event may never have fired (Gecko &amp; Opera)
		if (true === $.data(event.target, this.widgetName + &quot;.preventClickEvent&quot;)) {
			$.removeData(event.target, this.widgetName + &quot;.preventClickEvent&quot;);
		}

		// these delegates are required to keep context
		this._mouseMoveDelegate = function(event) {
			return that._mouseMove(event);
		};
		this._mouseUpDelegate = function(event) {
			return that._mouseUp(event);
		};

		this.document
			.bind( &quot;mousemove.&quot; + this.widgetName, this._mouseMoveDelegate )
			.bind( &quot;mouseup.&quot; + this.widgetName, this._mouseUpDelegate );

		event.preventDefault();

		mouseHandled = true;
		return true;
	},
    /**
     * 处理交互的每个移动。为要处理的扩展小部件调用 _mouseDrag 方法。
     * @method  _mouseMove
     * @param event
     * @returns {*}
     * @private
     */
	_mouseMove: function(event) {
		// Only check for mouseups outside the document if you&#x27;ve moved inside the document
		// at least once. This prevents the firing of mouseup in the case of IE&lt;9, which will
		// fire a mousemove event if content is placed under the cursor. See #7778
		// Support: IE &lt;9
		if ( this._mouseMoved ) {
			// IE mouseup check - mouseup happened when mouse was out of window
			if ($.ui.ie &amp;&amp; ( !document.documentMode || document.documentMode &lt; 9 ) &amp;&amp; !event.button) {
				return this._mouseUp(event);

			// Iframe mouseup check - mouseup occurred in another document
			} else if ( !event.which ) {
				return this._mouseUp( event );
			}
		}

		if ( event.which || event.button ) {
			this._mouseMoved = true;
		}

		if (this._mouseStarted) {
			this._mouseDrag(event);
			return event.preventDefault();
		}

		if (this._mouseDistanceMet(event) &amp;&amp; this._mouseDelayMet(event)) {
			this._mouseStarted =
				(this._mouseStart(this._mouseDownEvent, event) !== false);
			(this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event));
		}

		return !this._mouseStarted;
	},
    /**
     * 处理交互的结束。为要处理的扩展小部件调用 _mouseStop 方法。
     * @method  _mouseUp
     * @param event
     * @returns {boolean}
     * @private
     */
	_mouseUp: function(event) {
		this.document
			.unbind( &quot;mousemove.&quot; + this.widgetName, this._mouseMoveDelegate )
			.unbind( &quot;mouseup.&quot; + this.widgetName, this._mouseUpDelegate );

		if (this._mouseStarted) {
			this._mouseStarted = false;

			if (event.target === this._mouseDownEvent.target) {
				$.data(event.target, this.widgetName + &quot;.preventClickEvent&quot;, true);
			}

			this._mouseStop(event);
		}

		mouseHandled = false;
		return false;
	},
    /**
     * 决定 distance 选项是否满足当前交互。
     * @method  _mouseDistanceMet
     * @param event
     * @returns {boolean}
     * @private
     */
	_mouseDistanceMet: function(event) {
		return (Math.max(
				Math.abs(this._mouseDownEvent.pageX - event.pageX),
				Math.abs(this._mouseDownEvent.pageY - event.pageY)
			) &gt;= this.options.distance
		);
	},
    /**
     * 决定 delay 选项是否满足当前交互。
     * @method  _mouseDelayMet
     * @returns {boolean|*|mouseDelayMet}
     * @private
     */
	_mouseDelayMet: function(/* event */) {
		return this.mouseDelayMet;
	},

	// These are placeholder methods, to be overriden by extending plugin
    /**
     * 扩展小部件应实现一个 _mouseStart() 方法，来处理交互的开始。该方法将接收与交互开始相关联的鼠标事件。
     * @method  _mouseStart
     * @private
     */
	_mouseStart: function(/* event */) {},
    /**
     * 扩展小部件应实现一个 _mouseDrag() 方法，来处理交互的每个移动。该方法将接收与鼠标移动相关联的鼠标事件。
     * @method  _mouseDrag
     * @private
     */
	_mouseDrag: function(/* event */) {},
    /**
     * 扩展小部件应实现一个 _mouseStop() 方法，来处理交互的结束。该方法将接收与交互结束相关联的鼠标事件。
     * @method  _mouseStop
     * @private
     */
	_mouseStop: function(/* event */) {},
    /**
     * 决定交互是否应该基于交互的事件目标开始。默认的实现总是返回 true。
     * @method  _mouseCapture
     * @returns {boolean}
     * @private
     */
	_mouseCapture: function(/* event */) { return true; }
});

}));

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
